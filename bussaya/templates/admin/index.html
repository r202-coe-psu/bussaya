{% extends '/base/default-dashboard.html' %}

{% block content %}
{#
<div class="ui segment middle algined" style="min-height: 80vh; padding-top: 10vh">
  <div class="ui icon header center aligned">
    <i class="icon university end"></i>
    <h3>Hello, {{ current_user.first_name }} {{ current_user.last_name }} </p>
    <div>
      <a class="ui primary button" href="{{ url_for('classes.index') }}">Class</a>
      <a class="ui primary button" href="{{ url_for('votings.index') }}">View Vote</a>
      <a class="ui primary button" href="{{ url_for('elections.index') }}">Manage Election</a>
    </div>
  </div>
</div>
#}

<h4>Class: {{ class_.name }}</h4>
<table class="ui celled table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Students</th>
      <th>Advisor</th>
      <th>Public</th>
      <th>Document</th>
      <th>Approve</th>
    </tr>
  </thead>
  <tbody>

    {% for project in projects %}
    <tr>
      <td>{{ project.name }}</td>
      <td>
        {%- for s in project.students %}
        {{ s.first_name }} {{ s.last_name }}
        {% if not loop.last %}, {% endif %}
        {% endfor -%}
      </td>
      <td>{{ project.advisor.first_name }} {{ project.advisor.last_name }}</td>
      <td>{{ project.public.title() }}</td>
      <td class="single line">
        {% set r = project.get_resource('report') %}
        {% if r %}
          <a target="_blank" href="{{ r.link }}"><i class="large pdf file icon link pop" data-content="Report"></i></a>
        {% else %}
          <i class="large pdf file icon disabled"></i>
        {% endif %}

        {% set r = project.get_resource('similarity') %}
        {% if r %}
          <a href="{{ r.link }}"><i class="large copy icon link pop" data-content="Similarity"></i></a>
        {% else %}
          <i class="large copy icon disabled"></i>
        {% endif %}

        {% set r = project.get_resource('poster') %}
        {% if r %}
          <a href="{{ r.link }}"><i class="large file image icon link pop" data-content="Poster"></i></a>
        {% else %}
          <i class="large file image icon disabled"></i>
        {% endif %}

        {% set r = project.get_resource('presentation') %}
        {% if r %}
          <a href="{{ r.link }}"><i class="large file powerpoint icon link pop" data-content="Presentation"></i></a>
        {% else %}
          <i class="large file powerpoint icon disabled"></i>
        {% endif %}

        {% set r = project.get_resource('other') %}
        {% if r %}
          <a href="{{ r.link }}"><i class="large archive icon link pop" data-content="Other Resorces"></i></a>
        {% else %}
          <i class="large archive icon disabled"></i>
        {% endif %}

        {% set r = project.get_resource('video') %}
        {% if r %}
          <a href="{{ r.link }}"><i class="large video icon link pop" data-content="Video"></i></a>
        {% else %}
          <i class="large video icon disabled"></i>
        {% endif %}

        {% set r = project.get_resource('git') %}
        {% if r %}
          <a href="{{ r.link }}"><i class="large git icon link pop" data-content="Git Repository"></i></a>
        {% else %}
          <i class="large git icon disabled"></i>
        {% endif %}
      </td>
      <td>
        {% for committee in project.committees %}
          {{ committee.first_name }}
          {% if project.is_approval(committee) %}
            <i class="large blue check icon"></i>
          {% else %}
            <i class="large check icon disabled"></i>
          {% endif %}
          <br>
        {% endfor %}
      </td>
    </tr>
  	{% endfor %}

  </tbody>
</table>

{% endblock %}
