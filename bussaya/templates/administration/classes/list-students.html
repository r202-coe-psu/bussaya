{% extends '/base/default-dashboard.html' %}

{% block breadcrumbs %}
<a href="{{ url_for('administration.courses.index') }}" class="breadcrumb">Courses</a>
{% endblock %}

{% block content %}
<div class="row">
  <div class="col s12">
    <h3>Enrolled Students</h3>
  </div>
</div>

<div class="row">
	<div class="col s12">

	 <table>
			<thead>
				<tr>
					<th>Name</th>
					<th>Score</th>
					<th>Operation</th>
				</tr>
			</thead>
			<tbody>
{% for enrollment in enrollments  %}
				<tr>
          <td>
            {{ enrollment.user.first_name }} {{ enrollment.user.last_name }}

            {#
            <a href="{{ url_for('administration.courses.view', course_id=course.id) }}">{{ course.name }}</a>
            #}
					</td>
          <td>
            {% set score = class_.get_assignment_score(enrollment.user) %}
            {{ score['total_user_score'] }} / {{ score['total_score'] }}
		      </td>
          <td>
            {% if class_.owner == current_user %}
              <a href="{{ url_for('administration.classes.show_student_score', class_id=class_.id, student_id=enrollment.user.id) }}"><i class="material-icons">visibility</i></a>
            {% elif class_.is_teaching_assistant(current_user) %}
              <a href="{{ url_for('teaching_assistants.classes.show_student_score', class_id=class_.id, student_id=enrollment.user.id) }}"><i class="material-icons">visibility</i></a>
            {% endif %}
          </td>
				</tr>
{% endfor %}
			</tbody>
		</table>

  </div>
</div>

{% endblock %}
